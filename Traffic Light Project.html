<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Traffic Light Project | Aayush</title>
<style>
  body { margin: 0; font-family: Arial, sans-serif; background: #f0f2f5; color: #222; line-height: 1.6; }
  .navbar { display: flex; justify-content: flex-start; gap: 32px; background-color: #333; padding: 14px 32px; position: fixed; top: 0; width: 100%; z-index: 100; }
  .navbar a { color: white; text-decoration: none; font-weight: bold; padding: 8px 16px; border-radius: 4px; transition: background 0.3s; }
  .navbar a:hover { background-color: #555; color: white; }
  section { padding: 120px 32px 80px; max-width: 1000px; margin: auto; }
  h1 { margin-bottom: 20px; text-align: center; color: #333; }
  h2 { margin-top: 30px; margin-bottom: 10px; color: #444; }
  .project-card { background: white; border: 1px solid #ddd; padding: 30px; border-radius: 12px; box-shadow: 0 6px 20px rgba(0,0,0,0.1); margin-bottom: 40px; display: flex; flex-direction: column; gap: 20px; }
  .project-image { width: 100%; max-height: 450px; object-fit: cover; border-radius: 12px; }
  video { width: 100%; max-width: 600px; height: auto; border-radius: 12px; display: block; margin-left: auto; margin-right: auto; }
  pre { background: #272822; color: #f8f8f2; padding: 20px; overflow-x: auto; border-radius: 12px; font-size: 14px; max-height: 800px; white-space: pre-wrap; }
  ul { margin-left: 20px; }
  .section-container { display: flex; flex-direction: column; gap: 30px; }
  .footer { text-align: center; padding: 40px; color: #555; border-top: 1px solid #ddd; margin-top: 40px; }

  .collapsible { background-color: #333; color: white; cursor: pointer; padding: 10px 20px; border: none; border-radius: 6px; text-align: left; outline: none; font-size: 16px; }
  .active, .collapsible:hover { background-color: #555; }
  .content { padding: 0 20px; max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; background-color: #272822; border-radius: 0 0 12px 12px; margin-top: 20px; }
  .content pre { margin: 0; background: none; color: #f8f8f2; white-space: pre-wrap; }
</style>
</head>
<body>

<div class="navbar">
  <a href="index.html">Home</a>
  <a href="projects.html">Projects</a>
  <a href="about.html">About Me</a>
</div>

<section id="traffic-light">
  <h1>Traffic Light Project</h1>
  <div class="project-card section-container">

    <h2>Project Overview</h2>
    <p>This project demonstrates the use of a Raspberry Pi 4b to control a traffic light system. The logic incorporates threading in Python to manage multiple tasks concurrently, such as controlling traffic lights, pedestrian signals, and left turn indicators.</p>

    <h2>Project Features</h2>
    <ul>
      <li>Pedestrian button to trigger pedestrian lights</li>
      <li>Left turn signal with each cycle</li>
      <li>Real-time status updates on the terminal</li>
      <li>Uses GPIOZero library for simplified Raspberry Pi GPIO control</li>
    </ul>

    <h2>Project Explanation</h2>
    <p>The traffic light system simulates real-world traffic lights with pedestrian controls. The sequence of lights is adjusted based on button presses, with green, yellow, and red phases. Additionally, the pedestrian button initiates a sequence where pedestrian lights are displayed, and the system returns to its normal operation.</p>

    <img class="project-image" src="Traffic-Light-Photo (1).jpg" alt="Traffic Light Setup">

    <video controls>
      <source src="videostraffic_breadboard (1).mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
    <video controls>
      <source src="Traffic-Light-Working (1).mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>

    <button type="button" class="collapsible">View Python Code</button>
    <div class="content">
      <pre>
Python

import time
import threading
from gpiozero import LED, Button

input_received = threading.Event()
pedestrian_active = threading.Event()
normal_run_pause = threading.Event()
leftturndone = threading.Event()

led = LED(17)
gled = LED(27)
yled = LED(22)
rled = LED(23)
gled2 = LED(24)
yled2 = LED(25)
pled1 = LED(16)
pled1red = LED(26)
pled2 = LED(15)
pled2red = LED(14)
leftturn1 = LED(6)
crossbutton = Button(5)

def leftturn():
     print("Color 1: Left Turn On")
     leftturn1.on()
     time.sleep(2)
     print("Color 1: Left Turn Off")
     leftturn1.off()

def leftturngreen():
    print("\nColor: Green")
    gled.on()
    print("\nPedestrian 1: On")
    time.sleep(5)
    gled.off()
    print("Pedestrian 1: Off")

def leftturn2():
    print("Color 1: Left Turn On")
    leftturn1.on()
    time.sleep(2)
    print("Color 1: Left Turn Off")
    leftturn1.off()
    leftturndone.set()

def leftturngreen2():
    pled1red.off()
    print("\nColor: Green")
    gled.on()
   
    leftturndone.wait()
    pled1.on()
           
    print("\nPedestrian 1: On")
    time.sleep(3)
    gled.off()
    print("Pedestrian 1: Off")
    pled1.off()
    leftturndone.clear()
    pled1red.on()

def aftercrossing2():
    print("Color 2: Green")
    gled2.on()
    print("Color 2: Pedestrian On")
    pled2red.off()
    pled2.on()
    time.sleep(5)
    pled2.off()
    pled2red.on()
    gled2.off()
    print("Color 2: Yellow")
    yled2.on()
    time.sleep(2)
    yled2.off()
    led.off()

def cross_input():
    while True:
        if crossbutton.is_pressed:
            input_received.set()
            print("\nCrossing Signal Recieved")

def red_light():
    print("\nColor: Red")
    pled2.on()
    led.on()
    time.sleep(8)
    led.off()
    pled2.off()

def normalrun2():
    while True:
        pled1red.on()
        pled2red.on()
        print("\nColor 2: Red")
        rled.on()
        time.sleep(8)
        rled.off()

        normal_run_pause.wait()

        if pedestrian_active.is_set():
            print("\nSkipping Color 2: Green due to pedestrian sequence")
            continue
        else:
            print("\nColor 2: Green")
            gled2.on()
            time.sleep(5)
            gled2.off()

        print("\nColor 2: Yellow")
        yled2.on()
        time.sleep(2)
        yled2.off()
        break

def pedestrianrun2():
    while True:
        pedestrian_active.set()
        normal_run_pause.clear()
        t1_2 = threading.Thread(target=aftercrossing2, daemon=True)
        t1_3 = threading.Thread(target=leftturn2, daemon=True)
        t1_4 = threading.Thread(target=leftturngreen2, daemon=True)
        print("\Color 2: Red")
        rled.on()
        t1_4.start()
        t1_3.start()
        t1_4.join()

        print("\nColor 2: Yellow")
        yled.on()
        time.sleep(2)
        yled.off()
        rled.off()
        led.on()

        t1_2.start()
        t1_2.join()
        t1_3.join()

        break

    pedestrian_active.clear()
    normal_run_pause.set()

def normalrun():
    while True:
        t6 = threading.Thread(target=leftturn, daemon=True)
        t5 = threading.Thread(target=leftturngreen, daemon=True)
        t4 = threading.Thread(target=pedestrianrun2, daemon=True)
        t3 = threading.Thread(target=normalrun2, daemon=True)
        t2 = threading.Thread(target=red_light, daemon=True)
        t1 = threading.Thread(target=cross_input, daemon=True)

        normal_run_pause.set()
        t3.start()
        pled1red.on()
        pled2red.on()
        t5.start()
        t6.start()
        t5.join()

        print("\nColor: Yellow")
        yled.on()
        time.sleep(2)
        yled.off()

        t2.start()
        t1.start()
        t1.join(timeout=8)

        if input_received.is_set():
            print("\nActive")
            t4.start()
            t4.join()
            input_received.clear()
        elif t1.is_alive():
            print("\nNo")
            input_received.clear()

        t2.join()
        t3.join()
        t6.join()

normalrun()
      </pre>
    </div>

  </div>
</section>

<div class="footer">Â© 2025 Aayush</div>

<script>
  const coll = document.getElementsByClassName("collapsible");
  for (let i = 0; i < coll.length; i++) {
    coll[i].addEventListener("click", function() {
      this.classList.toggle("active");
      const content = this.nextElementSibling;
      if (content.style.maxHeight){
        content.style.maxHeight = null;
      } else {
        content.style.maxHeight = content.scrollHeight + "px";
      } 
    });
  }
</script>

</body>
</html>
